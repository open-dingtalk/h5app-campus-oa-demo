(this["webpackJsonpfront-end"]=this["webpackJsonpfront-end"]||[]).push([[0],{161:function(e,t,s){},398:function(e,t,s){},476:function(e,t,s){"use strict";s.r(t);var a=s(0),i=s.n(a),n=s(29),c=s.n(n),r=(s(161),s(15)),o=s(16),h=s(20),d=s(19),l=s(136),u=s(46),j=s.n(u),p=(s(398),s(153)),b=s(21),m=s(8),O=s(478),f=s(479),y=s(152),x=s(5),g=function(e){var t=O.a.useForm(),s=Object(m.a)(t,1)[0];Object(a.useEffect)((function(){s.setFieldsValue({title:"\u4efb\u52a1\u5f85\u529e",url:"/toWork",createTime:"2021-07-05 16:00:00",formTitle:"\u6807\u9898",formContent:"\u5185\u5bb9"})}),[]);for(var i=[],n=0;n<e.users.length;n++)i.push(e.users[n].name);return 2===e.showType?Object(x.jsxs)("div",{children:[Object(x.jsx)("h4",{className:"title",children:"\u521b\u5efa\u4efb\u52a1"}),Object(x.jsxs)("text",{className:"littleTitle",children:["\u4ee3\u529e\u4eba\uff1a",i.join(",")]}),Object(x.jsxs)(O.a,{form:s,onFinish:function(t){e.onClick(t)},children:[Object(x.jsx)(O.a.Item,{label:"\u4efb\u52a1\u6807\u9898",name:"title",children:Object(x.jsx)(f.a,{placeholder:"\u8bf7\u8f93\u5165\u6807\u9898"})}),Object(x.jsx)(O.a.Item,{label:"\u4efb\u52a1\u94fe\u63a5",name:"url",children:Object(x.jsx)(f.a,{placeholder:"\u8bf7\u8f93\u5165\u4efb\u52a1\u94fe\u63a5"})}),Object(x.jsx)(O.a.Item,{label:"\u5f85\u529e\u65f6\u95f4",name:"createTime",children:Object(x.jsx)(f.a,{placeholder:"\u8f93\u5165\u683c\u5f0f\uff1ayyyy-MM-dd hh:mm:ss"})}),Object(x.jsx)(O.a.Item,{label:"\u5c0f\u6807\u9898",name:"formTitle",children:Object(x.jsx)(f.a,{placeholder:"\u8bf7\u8f93\u5165\u5c0f\u6807\u9898"})}),Object(x.jsx)(O.a.Item,{label:"\u5b66\u4e60\u5185\u5bb9",name:"formContent",children:Object(x.jsx)(f.a,{placeholder:"\u8bf7\u8f93\u5165\u5b66\u4e60\u5185\u5bb9"})}),Object(x.jsx)(y.a,{htmlType:"submit",type:"primary",children:"\u63d0\u4ea4"})]})]}):Object(x.jsx)("div",{})},v=s(481),C=function(e){var t=f.a.TextArea;return 1===e.showType?Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"title",children:e.className}),Object(x.jsx)("h4",{className:"littleTitle",children:"\u8001\u5e08\u5217\u8868"}),e.teachers.map((function(t,s){return Object(x.jsx)("div",{children:Object(x.jsx)(v.a,{value:t.userid,name:t.name,onChange:e.addUser,children:t.name})},"teacher"+s)})),Object(x.jsxs)("p",{children:["\u8f93\u5165\u901a\u77e5\u5185\u5bb9\uff1a",Object(x.jsx)(t,{value:e.text,onChange:e.onChange,rows:4})]}),Object(x.jsx)("p",{children:Object(x.jsx)(y.a,{type:"primary",onClick:e.onClick,children:"\u53d1\u9001\u901a\u77e5"})}),Object(x.jsx)("p",{onClick:e.showWork,children:Object(x.jsx)("a",{className:"AppLink",children:"\u521b\u5efa\u5f85\u529e"})})]}):Object(x.jsx)("div",{})},T=s(480),k=function(e){return Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{className:"littleTitle",children:"\u6211\u7684\u8bfe\u7a0b"}),Object(x.jsx)("div",{children:Object(x.jsx)(T.a.Group,{onChange:e.chooseMy,children:e.myCourses.map((function(t,s){return Object(x.jsx)("div",{className:"radioList",children:Object(x.jsxs)(T.a,{name:"myCourse",value:t.courseCode,onChange:e.chooseMy,children:[Object(x.jsxs)("span",{children:["\u8bfe\u7a0b\u540d\u79f0\uff1a",t.name]}),Object(x.jsx)("br",{}),Object(x.jsxs)("span",{children:["\u4e0a\u8bfe\u65f6\u95f4\uff1a",t.startTime+"~"+t.endTime]}),Object(x.jsx)("br",{}),Object(x.jsxs)("span",{children:["\u4efb\u8bfe\u8001\u5e08\uff1a",t.teacherName]}),Object(x.jsx)("br",{})]})},"my"+s)}))})})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{className:"littleTitle",children:"\u5176\u4ed6\u8001\u5e08\u8bfe\u7a0b"}),Object(x.jsx)("div",{children:Object(x.jsx)(T.a.Group,{onChange:e.chooseOther,children:e.otherCourses.map((function(t,s){return Object(x.jsx)("div",{className:"radioList",children:Object(x.jsxs)(T.a,{name:"otherCourse",value:t.courseCode,onChange:e.chooseOther,children:[Object(x.jsxs)("span",{children:["\u8bfe\u7a0b\u540d\u79f0\uff1a",t.name]}),Object(x.jsx)("br",{}),Object(x.jsxs)("span",{children:["\u4e0a\u8bfe\u65f6\u95f4\uff1a",t.startTime+"~"+t.endTime]}),Object(x.jsx)("br",{}),Object(x.jsxs)("span",{children:["\u4efb\u8bfe\u8001\u5e08\uff1a",t.teacherName]}),Object(x.jsx)("br",{})]})},"other"+s)}))})})]}),Object(x.jsx)("p",{children:Object(x.jsx)(y.a,{type:"primary",onClick:e.onClick,children:"\u7533\u8bf7\u6362\u8bfe"})})]})},N=(s(468),function(e){Object(h.a)(s,e);var t=Object(d.a)(s);function s(e){var a;return Object(r.a)(this,s),(a=t.call(this,e)).state={domain:"",corpId:"",authCode:"",userId:"",userName:"",deptList:[],deptId:0,teachers:[],myCourses:[{name:1111,startTime:"22222",endTime:"33333",teacherName:"4444",courseCode:"5555"},{name:333,startTime:"444",endTime:"555",teacherName:"999",courseCode:"5500055"}],otherCourses:[{name:1111,startTime:"22222",endTime:"33333",teacherName:"4444",courseCode:"6665"}],adjustCourse:{myCourseCode:"",otherCourseCode:""},showType:0,className:"",classId:"",bizId:"",finish:!1,sendMessage:{teacherList:[],title:"\u901a\u77e5",text:"",time:""},origin:"",displayType:0},a}return Object(o.a)(s,[{key:"showWork",value:function(e){this.setState({showType:2})}},{key:"addUser",value:function(e){var t=this.state.sendMessage;t.teacherList.push({id:e.target.value,name:e.target.name}),this.setState({sendMessage:t}),console.log(JSON.stringify(this.state.sendMessage))}},{key:"setText",value:function(e){var t=this.state.sendMessage;t.text=e.target.value,this.setState({sendMessage:t})}},{key:"sendMsg",value:function(e){var t=this.state.sendMessage;t.classId=this.state.classId,this.setState({sendMessage:t});var s=this.state.sendMessage;s.origin=window.location.origin,j.a.post(this.state.domain+"/campus/sendMsg",JSON.stringify(s),{headers:{"Content-Type":"application/json"}}).then((function(e){p.b.success("\u901a\u77e5\u5df2\u53d1\u51fa\uff01")})).catch((function(e){alert("tongzhi err "+JSON.stringify(e))}))}},{key:"getBizId",value:function(e){if(e){var t=e.split("=");t&&-1!==t[0].indexOf("?bizId")&&this.setState({bizId:t[1]})}else alert("param error!!!",e)}},{key:"finishWork",value:function(){var e=this;this.state.finish?p.b.success("\u5df2\u5b8c\u6210"):j.a.post(this.state.domain+"/campus/updateWork",{userId:this.state.userId,bizId:this.state.bizId},{headers:{"Content-Type":"application/json"}}).then((function(t){alert("\u5b8c\u6210\u4efb\u52a1"),e.setState({finish:!0})})).catch((function(e){alert(JSON.stringify(e))}))}},{key:"render",value:function(){var e=this;""===this.state.userId&&this.login();var t,s=this.props.location.search;if(s){""===this.state.bizId&&this.getBizId(s);var a=this.state.finish?Object(x.jsx)("div",{children:"\u5df2\u5b8c\u6210"}):Object(x.jsxs)("div",{children:["\u4efb\u52a1\u9875\u9762\u3002\u3002\u3002",Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("button",{type:"button",onClick:function(){return e.finishWork()},children:"\u5b8c\u6210\u4efb\u52a1"})]});return Object(x.jsx)("div",{children:a})}if(0===this.state.displayType)t=Object(x.jsxs)("div",{children:[Object(x.jsx)("a",{onClick:function(t){return e.displayType(t,1)},className:"AppLink",children:"\u53d1\u9001\u901a\u77e5/\u5f85\u529e"}),Object(x.jsx)("a",{onClick:function(t){return e.displayType(t,2)},className:"AppLink",children:"\u8c03\u6362\u8bfe"})]});else if(1===this.state.displayType){var i;i=0===this.state.showType?Object(x.jsxs)("div",{children:[Object(x.jsx)("h3",{className:"title",children:"\u9009\u62e9\u90e8\u95e8\uff1a"}),this.state.deptList.map((function(t,s){return Object(x.jsx)("div",{children:Object(x.jsx)("p",{children:Object(x.jsx)("a",{className:"AppLink",children:Object(x.jsx)("span",{onClick:function(s){return e.chooseDept(s,t.deptId,t.deptType,t.name)},children:t.name})})})},s)}))]}):Object(x.jsx)("div",{}),t=Object(x.jsxs)("div",{children:[i,Object(x.jsx)(C,{showType:this.state.showType,teachers:this.state.teachers,className:this.state.className,addUser:function(t){return e.addUser(t)},onChange:function(t){return e.setText(t)},text:this.state.sendMessage.text,onClick:function(t){return e.sendMsg(t)},showWork:function(t){return e.showWork(t)}}),Object(x.jsx)(g,{showType:this.state.showType,users:this.state.sendMessage.teacherList,onClick:function(t){return e.newWorkRecord(t)}})]})}else 2===this.state.displayType&&(t=Object(x.jsx)("div",{children:Object(x.jsx)(k,{myCourses:this.state.myCourses,otherCourses:this.state.otherCourses,chooseMy:function(t){return e.chooseMy(t)},chooseOther:function(t){return e.chooseOther(t)},onClick:function(){return e.adjust()}})}));return Object(x.jsx)("div",{className:"App",children:t})}},{key:"adjust",value:function(){var e=this.state.adjustCourse;e.origin=window.location.origin,j.a.post(this.state.domain+"/campus/adjust",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then((function(e){p.b.success("\u8c03\u8bfe\u7533\u8bf7\u5df2\u53d1\u51fa\uff0c\u8bf7\u7559\u610f\u901a\u77e5\u6d88\u606f!")})).catch((function(e){alert("adjust err "+JSON.stringify(e))}))}},{key:"chooseOther",value:function(e){var t=e.target.value,s=this.state.adjustCourse;s.otherCourseCode=t,this.setState({adjustCourse:s})}},{key:"chooseMy",value:function(e){var t=e.target.value,s=this.state.adjustCourse;s.myCourseCode=t,this.setState({adjustCourse:s})}},{key:"courseList",value:function(){var e=this;j.a.get(this.state.domain+"/campus/courseList?userid="+this.state.userId).then((function(t){e.setState({myCourses:t.data.data.myCourses,otherCourses:t.data.data.otherCourses,displayType:2})})).catch((function(e){alert("courseList err "+JSON.stringify(e))}))}},{key:"displayType",value:function(e,t){2===t?this.courseList():this.setState({displayType:t})}},{key:"newWorkRecord",value:function(e){for(var t=this,s=[],a=0;a<this.state.sendMessage.teacherList.length;a++)s.push(this.state.sendMessage.teacherList[a].id);e.ids=s,e.url=window.location.origin+e.url,e.origin=window.location.origin,j.a.post(this.state.domain+"/campus/newWork",JSON.stringify(e),{headers:{"Content-Type":"application/json"}}).then((function(e){e.data.success?p.b.success("\u521b\u5efa\u4efb\u52a1\u5f85\u529e\u6210\u529f\uff01"):p.b.error("\u521b\u5efa\u4efb\u52a1\u5f85\u529e\u5931\u8d25\uff01"),t.setState({showType:1})})).catch((function(e){alert(JSON.stringify(e))}))}},{key:"chooseDept",value:function(e,t,s,a){console.log("chooseDept deptId : "+t),"class"===s?(this.setState({classId:t,className:a}),this.getClassUserList(t)):(this.setState({deptId:t}),this.getDeptList(t))}},{key:"getClassUserList",value:function(e){var t=this;j.a.get(this.state.domain+"/campus/classUserList?classId="+e).then((function(e){t.setState({teachers:e.data.data.result.details,showType:1})})).catch((function(e){alert("class err "+JSON.stringify(e))}))}},{key:"getDeptList",value:function(e){var t=this;j.a.get(this.state.domain+"/campus/deptList?deptId="+e).then((function(e){t.setState({deptList:e.data.data.result.details,showType:0})})).catch((function(e){alert("dept err "+JSON.stringify(e))}))}},{key:"login",value:function(){var e=this;j.a.get(this.state.domain+"/getCorpId").then((function(t){t.data&&e.loginAction(t.data)})).catch((function(e){alert("corpId err, "+JSON.stringify(e))}))}},{key:"loginAction",value:function(e){var t=this;l.runtime.permission.requestAuthCode({corpId:e,onSuccess:function(e){t.state.authCode=e.code,j.a.get(t.state.domain+"/login?authCode="+t.state.authCode).then((function(e){if(e&&e.data.success){var s=e.data.data.userId,a=e.data.data.userName;p.b.success("\u767b\u5f55\u6210\u529f\uff0c\u4f60\u597d:"+a),setTimeout((function(){t.setState({userId:s,userName:a})}),0),t.getDeptList(0)}else alert("login failed ---\x3e"+JSON.stringify(e))})).catch((function(e){alert("httpRequest failed ---\x3e"+JSON.stringify(e))}))},onFail:function(e){alert("requestAuthCode failed ---\x3e"+JSON.stringify(e))}})}}]),s}(i.a.Component)),I=Object(b.e)(N),S=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,482)).then((function(t){var s=t.getCLS,a=t.getFID,i=t.getFCP,n=t.getLCP,c=t.getTTFB;s(e),a(e),i(e),n(e),c(e)}))},w=s(107);c.a.render(Object(x.jsx)(w.a,{basename:"/",children:Object(x.jsx)(b.a,{path:"/",component:I})}),document.getElementById("root")),S()}},[[476,1,2]]]);
//# sourceMappingURL=main.b46141a1.chunk.js.map